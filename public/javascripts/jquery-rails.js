jQuery(function(b){var h=b("meta[name=csrf-token]").attr("content"),i=b("meta[name=csrf-param]").attr("content");b.fn.extend({triggerAndReturn:function(a,c){var d=new b.Event(a);this.trigger(d,c);return d.result!==false},callRemote:function(){var a=this,c=a.attr("method")||a.attr("data-method")||"GET",d=a.attr("action")||a.attr("href"),k=a.attr("data-type")||"script";if(d===undefined)throw"No URL specified for remote call (action or href must be present).";else{if(a.triggerAndReturn("ajax:before")){var l=
a.is("form")?a.serializeArray():[];b.ajax({url:d,data:l,dataType:k,type:c.toUpperCase(),beforeSend:function(e){a.trigger("ajax:loading",e)},success:function(e,f,g){a.trigger("ajax:success",[e,f,g])},complete:function(e){a.trigger("ajax:complete",e)},error:function(e,f,g){a.trigger("ajax:failure",[e,f,g])}})}a.trigger("ajax:after")}}});b("a[data-confirm],input[data-confirm]").live("click",function(){var a=b(this);if(a.triggerAndReturn("confirm"))if(!confirm(a.attr("data-confirm")))return false});b("form[data-remote]").live("submit",
function(a){b(this).callRemote();a.preventDefault()});b("a[data-remote],input[data-remote]").live("click",function(a){b(this).callRemote();a.preventDefault()});b("a[data-method]:not([data-remote])").live("click",function(a){var c=b(this),d=c.attr("href");c=c.attr("data-method");d=b('<form method="post" action="'+d+'"></form>');c='<input name="_method" value="'+c+'" type="hidden" />';if(i!=null&&h!=null)c+='<input name="'+i+'" value="'+h+'" type="hidden" />';d.hide().append(c).appendTo("body");a.preventDefault();
d.submit()});var j=function(){b(this).find("input[data-disable-with]").each(function(){var a=b(this);a.data("enable-with",a.val()).attr("value",a.attr("data-disable-with")).attr("disabled","disabled")})};b("form[data-remote]:has(input[data-disable-with])").live("ajax:before",j);b("form:not([data-remote]):has(input[data-disable-with])").live("submit",j);b("form[data-remote]:has(input[data-disable-with])").live("ajax:complete",function(){b(this).find("input[data-disable-with]").each(function(){var a=
b(this);a.removeAttr("disabled").val(a.data("enable-with"))})})});
